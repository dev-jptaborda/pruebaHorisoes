<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    
      <h:head>
        <title>Crud Personas</title>
      
    </h:head>
    <h:body>

                   
        <h2 style="margin-top:0">Crud Peliculas y Series</h2><br></br>
        
      <p:growl id="msj" showDetail="true"/>
                <h:form id = "frm">
                        <p:growl id="mensajes"/>
                    
                              <p:outputLabel  value="Tipo" />
                            <p:selectOneMenu value="#{peliculaBean.pelicula.tipo}">
                                <f:selectItem  itemLabel="Seleccionar.." itemValue=""/>
                                <f:selectItem  itemLabel="Serie" itemValue="serie"/>   
                                <f:selectItem  itemLabel="Pelicula " itemValue="pelicula"/>
                            </p:selectOneMenu>  
                      
  
                    <p:outputLabel for= "txtNombre" value="Nombre"/>
             <p:inputText id = "txtNombre" value="#{peliculaBean.pelicula.nombre}"/>
             
                                     
                     <p:outputLabel value="Cargar Imagen" />
                     <p:fileUpload value="#{peliculaBean.pelicula.imagen}" mode="simple" skinSimple="true"/>

                <p:outputLabel for= "txtCalificacion" value="Calificacion"/>
                <p:inputText id = "txtCalificacion" value="#{peliculaBean.pelicula.calificacion}"/>
             
             
                <p:outputLabel for= "txturacion" value="Duracion"/>
                <p:inputText id = "txturacion" value="#{peliculaBean.pelicula.duracion}"/>


             <p:commandButton value="Registrar" actionListener="#{peliculaBean.crearPelicula()}" update = "data"/>
             
             
                         <br></br>
 
<p:separator /><br></br>


             
             <p:dataTable id="data" value="#{peliculaBean.listarPeliculas}" var="pelic" >
                  <p:column headerText="Identificador Pelicula" >
                      <p:outputLabel value="#{pelic.idpeli_serie}"/>
                       </p:column>
                  <p:column headerText="Nombre" >
                      <p:outputLabel value="#{pelic.nombre}"/>
                      </p:column>
                   <p:column headerText="Tipo" >
                       <p:outputLabel value="#{pelic.tipo}"/>
                          </p:column>                      
                 
                 <p:column headerText="Imagen" >
                     <p:outputLabel value="#{pelic.imagen}"/>
                          </p:column>  
                                  
                 <p:column headerText="Duracion" >
                     <p:outputLabel value="#{pelic.duracion}"/>
                          </p:column>  
                
           <p:column headerText="Modificar" >
                 <p:commandLink value="Modificar" actionListener="#{peliculaBean.leerEdirarPelicula(pelic)}" oncomplete="PF('wdlDatos').show();" update=":dlgDatos"/>
              </p:column> 
                 
                 
                
                <p:column headerText="Eliminar" >
                    <p:commandLink value="Eliminar" actionListener="#{peliculaBean.eliminarPelicula(pelic)}"  update="data"/>
                </p:column>
            
              </p:dataTable>
                           
                </h:form>
      
    
    
        <p:dialog header="Cambiar Datos" widgetVar="wdlDatos" id="dlgDatos" showEffect="explode" hideEffect="bounce" height="100">
        <h:form>
                       <p:outputLabel value="Nombre"/> 
                       <p:inputText value="#{peliculaBean.pelicula.nombre}"/>
                
                           <p:outputLabel  value="Tipo" />
                           <p:selectOneMenu value="#{peliculaBean.pelicula.tipo}">
                                <f:selectItem  itemLabel="Seleccionar.." itemValue=""/>
                                <f:selectItem  itemLabel="Serie" itemValue="serie"/>   
                                <f:selectItem  itemLabel="Pelicula " itemValue="pelicula"/>
                            </p:selectOneMenu>  
                   
                     <p:outputLabel value="Imagen" />

                   <p:fileUpload value="#{peliculaBean.selPeliSerie.imagen}" mode="simple" skinSimple="true"/>

                     
                     
                                  
       <p:outputLabel value="Duracion"/> 
                     <p:inputText value="#{peliculaBean.pelicula.duracion}"/>
                
                <p:commandButton value="Cambiar" actionListener="#{peliculaBean.editarPelicula()}" oncomplete="PF('wdlDatos').hide();" update=":frm:data"/>
             
        </h:form>
        </p:dialog>
      <br></br>
        <p:commandButton value="Volver a Cartelera" id="back" action="/index?faces=redirect=true" style="margin-right:20px;" icon="pi pi-back" />
      </h:body>
</html>